<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Home Walkthrough</title>

<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }
  #info {
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 10px;
    z-index: 10;
    font-size: 14px;
  }
  .controls {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 10;
  }
  .btn {
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 16px;
    border-radius: 50%;
    user-select: none;
    font-size: 16px;
  }
</style>
</head>

<body>

<div id="info">
  Drag screen to look<br>
  Use buttons to move
</div>

<div class="controls">
  <div class="btn" ontouchstart="mf=true" ontouchend="mf=false">▲</div>
  <div class="btn" ontouchstart="ml=true" ontouchend="ml=false">◀</div>
  <div class="btn" ontouchstart="mr=true" ontouchend="mr=false">▶</div>
  <div class="btn" ontouchstart="mb=true" ontouchend="mb=false">▼</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<script>
// ===== SCENE =====
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xcccccc);

// ===== CAMERA =====
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.set(0, 1.6, 8);

// ===== RENDERER =====
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ===== CONTROLS (MOBILE SAFE) =====
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableZoom = false;
controls.enablePan = false;
controls.target.set(0, 1.6, 0);
controls.update();

// ===== LIGHT =====
scene.add(new THREE.AmbientLight(0xffffff, 0.7));
const dirLight = new THREE.DirectionalLight(0xffffff, 0.6);
dirLight.position.set(5, 10, 5);
scene.add(dirLight);

// ===== FLOOR =====
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(20, 20),
  new THREE.MeshStandardMaterial({ color: 0xdddddd })
);
floor.rotation.x = -Math.PI / 2;
floor.position.y = 0;
scene.add(floor);

// ===== WALLS =====
const wallMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
function wall(w, h, d, x, y, z) {
  const m = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), wallMat);
  m.position.set(x, y, z);
  scene.add(m);
}

const H = 3, T = 0.3, S = 10;
wall(S, H, T, 0, H / 2, -S / 2);
wall(S, H, T, 0, H / 2,  S / 2);
wall(T, H, S, -S / 2, H / 2, 0);
wall(T, H, S,  S / 2, H / 2, 0);

// ===== DEBUG AXIS (TEMPORARY) =====
scene.add(new THREE.AxesHelper(5));

// ===== MOVEMENT =====
let mf = false, mb = false, ml = false, mr = false;
const speed = 0.08;

function animate() {
  requestAnimationFrame(animate);

  const dir = new THREE.Vector3();
  camera.getWorldDirection(dir);
  dir.y = 0;
  dir.normalize();

  const right = new THREE.Vector3().crossVectors(camera.up, dir).normalize();

  if (mf) camera.position.addScaledVector(dir, speed);
  if (mb) camera.position.addScaledVector(dir, -speed);
  if (ml) camera.position.addScaledVector(right, speed);
  if (mr) camera.position.addScaledVector(right, -speed);

  controls.update();
  renderer.render(scene, camera);
}

animate();

// ===== RESIZE =====
window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
